{% extends "base.html" %}
{% block title %}My Performance Reports{% endblock %}

{% block content %}
<style>
    th {
        background: #b31e35 !important;
        color: #fff !important;
    }
</style>
<div class="container mt-4">
    <h2 class="mb-4">My Performance Reports</h2>
    <table class="table table-striped table-bordered align-middle">
        <thead class="table-dark">
            <tr>
                {% for col in cols if col|lower != 'report' and col|lower != 'id' %}
                    <th>{{ col.replace('_', ' ').title() }}</th>
                {% endfor %}
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for row in reports %}
            <tr>
                {% for col in cols if col|lower != 'report' and col|lower != 'id' %}
                    <td>{{ row[cols.index(col)] }}</td>
                {% endfor %}
                <td>
                    {% set report_value = row[-1] %}
                    {% if report_value %}
                        <a href="{{ url_for('dashboard.student_view_performance_report', report_id=row[0]) }}" class="btn btn-primary btn-sm" target="_blank">
                            <i class="fas fa-eye"></i> View
                        </a>
                        <a href="{{ url_for('dashboard.student_download_performance_report', report_id=row[0]) }}" class="btn btn-success btn-sm">
                            <i class="fas fa-download"></i> Download
                        </a>
                    {% else %}
                        <button class="btn btn-primary btn-sm" disabled>View</button>
                        <button class="btn btn-success btn-sm" disabled>Download</button>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
